:root {
  font-family: sans-serif;
  --tileBackground: lightgray;
  --tileBorderRadius: 5px;
  --tileWidth: 3em;
  --tileHeight: 1.75em;
  --pileBackground: #eee;
  --yellow: yellow;
  --blue: deepskyblue;
  --white: ghostwhite;
  --green: lightgreen;
  --red: deeppink;
  --boxShadowSize: 7px;
}

html {
  background-color:var(--pileBackground);
  background-image:
  radial-gradient(circle at 100% 150%, var(--pileBackground) 24%, white 25%, white 28%, var(--pileBackground) 29%, var(--pileBackground) 36%, white 36%, white 40%, transparent 40%, transparent),
  radial-gradient(circle at 0    150%, var(--pileBackground) 24%, white 25%, white 28%, var(--pileBackground) 29%, var(--pileBackground) 36%, white 36%, white 40%, transparent 40%, transparent),
  radial-gradient(circle at 50%  100%, white 10%, var(--pileBackground) 11%, var(--pileBackground) 23%, white 24%, white 30%, var(--pileBackground) 31%, var(--pileBackground) 43%, white 44%, white 50%, var(--pileBackground) 51%, var(--pileBackground) 63%, white 64%, white 71%, transparent 71%, transparent),
  radial-gradient(circle at 100% 50%, white 5%, var(--pileBackground) 6%, var(--pileBackground) 15%, white 16%, white 20%, var(--pileBackground) 21%, var(--pileBackground) 30%, white 31%, white 35%, var(--pileBackground) 36%, var(--pileBackground) 45%, white 46%, white 49%, transparent 50%, transparent),
  radial-gradient(circle at 0    50%, white 5%, var(--pileBackground) 6%, var(--pileBackground) 15%, white 16%, white 20%, var(--pileBackground) 21%, var(--pileBackground) 30%, white 31%, white 35%, var(--pileBackground) 36%, var(--pileBackground) 45%, white 46%, white 49%, transparent 50%, transparent);
  background-size: 32px 16px;
}

game {
  display: flex;
  align-items: flex-end;
  flex-wrap: wrap;
  margin: calc(var(--tileBorderRadius) * -1);
}

pile tiles {
  display: inline-flex;
  align-items: flex-end;
  flex-direction: column-reverse;
}

pile, hand {
  display: inline-block;
  background: var(--pileBackground);
  padding: calc(var(--tileBorderRadius) * 2);
  border-radius: var(--tileBorderRadius);
  margin: var(--tileBorderRadius);
  border: 1px solid #ccc;
}

.unsafe {
  border-color: var(--red);
  box-shadow: inset 0 0 var(--boxShadowSize) var(--red);
}

hand header, pile header {
  margin-bottom: var(--tileBorderRadius);
}

tiles {
  display: flex;
  align-items: flex-end;
  justify-content: center;
}

hand tiles + tiles {
  margin-top: var(--tileHeight);
}

tile {
  padding: 5px;
  display: inline-flex;
  align-items: center;
  justify-content: space-around;
  flex-direction: row;
  width: var(--tileWidth);
  height: var(--tileHeight);
  box-shadow: inset 0 0 var(--boxShadowSize) black;
  background: var(--tileBackground);
  border-radius: var(--tileBorderRadius);
  --textShadowColor: rgba(255, 255, 255, .2);
  text-shadow: -1px -1px 0 var(--textShadowColor),
                1px -1px 0 var(--textShadowColor),
               -1px  1px 0 var(--textShadowColor),
                1px  1px 0 var(--textShadowColor);
  font-weight: bold;
}

[title~=tapped] {
  flex-direction: column;
  width: var(--tileHeight);
  height: var(--tileWidth);
}

[title~='1']:before {
  content: '1';
}

[title~='2']:before {
  content: '2';
}

[title~='3']:before {
  content: '3';
}

[title~='4']:before {
  content: '4';
}

[title~='5']:before {
  content: '5';
}

mark {
  background: transparent;
  position: relative;
}

mark:before {
  content: 'â˜›';
  position: absolute;
  top: -2ex;
  pointer-events: none;
  font-size: 180%;
  transform: rotate(60deg);
  text-shadow: -1px -1px 0 var(--pileBackground),
                1px -1px 0 var(--pileBackground),
               -1px  1px 0 var(--pileBackground),
                1px  1px 0 var(--pileBackground);
  opacity: 1;
  transition: opacity 0.1s linear;
}

pile:hover mark:before, hand:hover mark:before, pile:active mark:before, hand:active mark:before {
  opacity: .2;
}

[title~=hidden]:before {
  content: ' ';
  border: 7px rgba(0,0,0,.4) solid;
  border-radius: 50%;
}

[title~=yellow] {
  background: var(--yellow);
}

[title~=blue] {
  background: var(--blue);
}

[title~=green] {
  background: var(--green);
}

[title~=red] {
  background: var(--red);
}

[title~=white] {
  background: var(--white);
}

[title~=rainbow] {
  --rotation: 90deg;
  background: repeating-linear-gradient(
                var(--rotation),
                var(--red),
                var(--red) 20%,
                var(--yellow) 20%,
                var(--yellow) 40%,
                var(--white) 40%,
                var(--white) 60%,
                var(--green) 60%,
                var(--green) 80%,
                var(--blue) 80%,
                var(--blue) 100%
              );
}

[title~=rainbow][title~=tapped] {
  --rotation: 180deg;
}

main {
  display: flex;
  background: var(--pileBackground);
  flex-wrap: wrap-reverse;
}

body {
  padding: 0;
  margin: 0;
  line-height: 1.2;
}

body > header {
  background: var(--pileBackground);
  padding: calc(var(--tileHeight)/3) calc(var(--tileWidth)/3);
}

nav {
  flex: 1 1 calc(var(--tileWidth) * 4);
}

article {
  border-radius: var(--tileBorderRadius);
  background: white;
  padding: 0 var(--tileHeight);
  flex: 999 999 calc(var(--tileWidth) * 6);
}

nav ul {
  padding: 0;
  margin: 0;
}

nav li {
  list-style-type: none;
  --space: calc(var(--tileHeight) / 3);
  margin: 0 var(--space) var(--space) var(--space);
  padding: var(--space);
}

.current {
  background: white;
  border-radius: var(--tileBorderRadius);
}
